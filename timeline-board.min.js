/*! ECB - v1.6.24 - European Central Bank */

"undefined"==typeof links&&(links={}),"undefined"==typeof google&&(google=void 0),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;++c)a.call(b||this,this[c],c,this)}),links.Timeline=function(a,b){if(a){this.dom={},this.conversion={},this.eventParams={},this.groups=[],this.groupIndexes={},this.items=[],this.renderQueue={show:[],hide:[],update:[]},this.renderedItems=[],this.clusterGenerator=new links.Timeline.ClusterGenerator(this),this.currentClusters=[],this.selection=void 0,this.listeners={},this.size={actualHeight:0,axis:{characterMajorHeight:0,characterMajorWidth:0,characterMinorHeight:0,characterMinorWidth:0,height:0,labelMajorTop:0,labelMinorTop:0,line:0,lineMajorWidth:0,lineMinorHeight:0,lineMinorTop:0,lineMinorWidth:0,top:0},contentHeight:0,contentLeft:0,contentWidth:0,frameHeight:0,frameWidth:0,groupsLeft:0,groupsWidth:0,items:{top:0}},this.dom.container=a,this.options={width:"100%",height:"auto",minHeight:0,groupMinHeight:0,autoHeight:!0,eventMargin:10,eventMarginAxis:20,dragAreaWidth:10,min:"",max:"",zoomMin:10,zoomMax:31536e10,moveable:!0,zoomable:!0,selectable:!0,unselectable:!0,editable:!1,snapEvents:!0,groupsChangeable:!0,timeChangeable:!0,showCurrentTime:!1,showCustomTime:!1,showMajorLabels:!0,showMinorLabels:!0,showNavigation:!1,showButtonNew:!1,groupsOnRight:!1,groupsOrder:!0,axisOnTop:!0,stackEvents:!0,animate:!0,animateZoom:!0,cluster:!1,clusterMaxItems:5,style:"box",customStackOrder:!1,locale:"en",MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],MONTHS_SHORT:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAYS:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],DAYS_SHORT:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",NEW:"New",CREATE_NEW_EVENT:"Create new event"},this.setOptions(b),this.clientTimeOffset=0;for(var c=this.dom;c.container.hasChildNodes();)c.container.removeChild(c.container.firstChild);this.step=new links.Timeline.StepDate,this.itemTypes={box:links.Timeline.ItemBox,range:links.Timeline.ItemRange,floatingRange:links.Timeline.ItemFloatingRange,dot:links.Timeline.ItemDot},this.data=[],this.firstDraw=!0,this.setVisibleChartRange(void 0,void 0,!1),this.render();var d=this;setTimeout(function(){d.trigger("ready")},0)}},links.Timeline.prototype.draw=function(a,b){b&&this.setOptions(b),this.options.selectable&&links.Timeline.addClassName(this.dom.frame,"timeline-selectable"),this.setData(a),this.firstDraw&&this.setVisibleChartRangeAuto(),this.firstDraw=!1},links.Timeline.prototype.setOptions=function(a){if(a){for(var b in a)a.hasOwnProperty(b)&&(this.options[b]=a[b]);if(void 0!==links.locales&&"en"!==this.options.locale){var c=links.locales[this.options.locale];if(c)for(var d in c)c.hasOwnProperty(d)&&(this.options[d]=c[d])}void 0!=a.showButtonAdd&&(this.options.showButtonNew=a.showButtonAdd),void 0!=a.intervalMin&&(this.options.zoomMin=a.intervalMin),void 0!=a.intervalMax&&(this.options.zoomMax=a.intervalMax),a.scale&&a.step&&this.step.setScale(a.scale,a.step)}this.options.autoHeight="auto"===this.options.height},links.Timeline.prototype.getOptions=function(){return this.options},links.Timeline.prototype.addItemType=function(a,b){this.itemTypes[a]=b},links.Timeline.mapColumnIds=function(a){for(var b={},c=a.getNumberOfColumns(),d=!0,e=0;e<c;e++){var f=a.getColumnId(e)||a.getColumnLabel(e);b[f]=e,"start"!=f&&"end"!=f&&"content"!=f&&"group"!=f&&"className"!=f&&"editable"!=f&&"type"!=f||(d=!1)}return d&&(b.start=0,b.end=1,b.content=2,c>3&&(b.group=3),c>4&&(b.className=4),c>5&&(b.editable=5),c>6&&(b.type=6)),b},links.Timeline.prototype.setData=function(a){this.unselectItem(),a||(a=[]),this.stackCancelAnimation(),this.clearItems(),this.data=a;var b=this.items;if(this.deleteGroups(),google&&google.visualization&&a instanceof google.visualization.DataTable)for(var c=links.Timeline.mapColumnIds(a),d=0,e=a.getNumberOfRows();d<e;d++)b.push(this.createItem({start:void 0!=c.start?a.getValue(d,c.start):void 0,end:void 0!=c.end?a.getValue(d,c.end):void 0,content:void 0!=c.content?a.getValue(d,c.content):void 0,group:void 0!=c.group?a.getValue(d,c.group):void 0,className:void 0!=c.className?a.getValue(d,c.className):void 0,editable:void 0!=c.editable?a.getValue(d,c.editable):void 0,type:void 0!=c.type?a.getValue(d,c.type):void 0}));else{if(!links.Timeline.isArray(a))throw"Unknown data type. DataTable or Array expected.";for(var d=0,e=a.length;d<e;d++){var f=a[d],g=this.createItem(f);b.push(g)}}this.options.cluster&&this.clusterGenerator.setData(this.items),this.render({animate:!1})},links.Timeline.prototype.getData=function(){return this.data},links.Timeline.prototype.updateData=function(a,b){var c,d=this.data;if(google&&google.visualization&&d instanceof google.visualization.DataTable){var e=a+1-d.getNumberOfRows();e>0&&d.addRows(e);var f=links.Timeline.mapColumnIds(d);for(c in b)if(b.hasOwnProperty(c)){var g=f[c];if(void 0==g){var h=b[c],i="string";"number"==typeof h?i="number":"boolean"==typeof h?i="boolean":h instanceof Date&&(i="datetime"),g=d.addColumn(i,c)}d.setValue(a,g,b[c])}}else{if(!links.Timeline.isArray(d))throw"Cannot update data, unknown type of data";var j=d[a];void 0==j&&(j={},d[a]=j);for(c in b)b.hasOwnProperty(c)&&(j[c]=b[c])}},links.Timeline.prototype.getItemIndex=function(a){for(var b=a,c=this.dom,d=c.items.frame,e=this.items,f=void 0;b.parentNode&&b.parentNode!==d;)b=b.parentNode;if(b.parentNode===d)for(var g=0,h=e.length;g<h;g++)if(e[g].dom===b){f=g;break}return f},links.Timeline.prototype.getClusterIndex=function(a){var b=a,c=this.dom,d=c.items.frame,e=this.clusters,f=void 0;if(this.clusters){for(;b.parentNode&&b.parentNode!==d;)b=b.parentNode;if(b.parentNode===d)for(var g=0,h=e.length;g<h;g++)if(e[g].dom===b){f=g;break}}return f},links.Timeline.prototype.getVisibleItems=function(a,b){var c=this.items,d=[];if(c)for(var e=0,f=c.length;e<f;e++){var g=c[e];g.end?a<=g.start&&g.end<=b&&d.push({row:e}):a<=g.start&&g.start<=b&&d.push({row:e})}return d},links.Timeline.prototype.setSize=function(a,b){a&&(this.options.width=a,this.dom.frame.style.width=a),b&&(this.options.height=b,this.options.autoHeight="auto"===this.options.height,"auto"!==b&&(this.dom.frame.style.height=b)),this.render({animate:!1})},links.Timeline.prototype.setVisibleChartRange=function(a,b,c){var d={};a&&b||(d=this.getDataRange(!0)),a||(b?d.min&&d.min.valueOf()<b.valueOf()?a=d.min:(a=new Date(b.valueOf()),a.setDate(a.getDate()-7)):(a=new Date,a.setDate(a.getDate()-3))),b||(d.max?b=d.max:(b=new Date(a.valueOf()),b.setDate(b.getDate()+7))),b<=a&&(b=new Date(a.valueOf()),b.setDate(b.getDate()+7));var e=this.options.min?this.options.min:void 0;void 0!=e&&a.valueOf()<e.valueOf()&&(a=new Date(e.valueOf()));var f=this.options.max?this.options.max:void 0;void 0!=f&&b.valueOf()>f.valueOf()&&(b=new Date(f.valueOf())),this.applyRange(a,b),void 0==c||1==c?this.render({animate:!1}):this.recalcConversion()},links.Timeline.prototype.setVisibleChartRangeAuto=function(){var a=this.getDataRange(!0);this.setVisibleChartRange(a.min,a.max)},links.Timeline.prototype.setVisibleChartRangeNow=function(){var a=new Date,b=this.end.valueOf()-this.start.valueOf(),c=new Date(a.valueOf()-b/2),d=new Date(c.valueOf()+b);this.setVisibleChartRange(c,d)},links.Timeline.prototype.getVisibleChartRange=function(){return{start:new Date(this.start.valueOf()),end:new Date(this.end.valueOf())}},links.Timeline.prototype.getDataRange=function(a){var b=this.items,c=void 0,d=void 0;if(b)for(var e=0,f=b.length;e<f;e++){var g=b[e],h=void 0!=g.start?g.start.valueOf():void 0,i=void 0!=g.end?g.end.valueOf():h;void 0!=h&&(c=void 0!=c?Math.min(c.valueOf(),h.valueOf()):h),void 0!=i&&(d=void 0!=d?Math.max(d.valueOf(),i.valueOf()):i)}if(c&&d&&a){var j=d-c;c-=.05*j,d+=.05*j}return{min:void 0!=c?new Date(c):void 0,max:void 0!=d?new Date(d):void 0}},links.Timeline.prototype.render=function(a){var b=(this.reflowFrame(),this.reflowAxis(),this.reflowGroups(),this.reflowItems(),this.options.animate);if(a&&void 0!=a.animate&&(b=a.animate),this.recalcConversion(),this.clusterItems(),this.filterItems(),this.stackItems(b),this.recalcItems(),this.repaint()){var c=a?a.renderTimesLeft:void 0;void 0==c&&(c=5),c>0&&this.render({animate:a?a.animate:void 0,renderTimesLeft:c-1})}},links.Timeline.prototype.repaint=function(){var a=this.repaintFrame(),b=this.repaintAxis(),c=this.repaintGroups(),d=this.repaintItems();return this.repaintCurrentTime(),this.repaintCustomTime(),a||b||c||d},links.Timeline.prototype.reflowFrame=function(){var a=this.dom,b=(this.options,this.size),c=!1,d=a.frame?a.frame.offsetWidth:0,e=a.frame?a.frame.clientHeight:0;return c=c||b.frameWidth!==d,c=c||b.frameHeight!==e,b.frameWidth=d,b.frameHeight=e,c},links.Timeline.prototype.repaintFrame=function(){var a=!1,b=this.dom,c=this.options,d=this.size;b.frame||(b.frame=document.createElement("DIV"),b.frame.className="timeline-frame ui-widget ui-widget-content ui-corner-all",b.container.appendChild(b.frame),a=!0);var e=c.autoHeight?d.actualHeight+"px":c.height||"100%",f=c.width||"100%";if(a=a||b.frame.style.height!=e,a=a||b.frame.style.width!=f,b.frame.style.height=e,b.frame.style.width=f,!b.content){b.content=document.createElement("DIV"),b.content.className="timeline-content",b.frame.appendChild(b.content);var g=document.createElement("DIV");g.style.position="absolute",g.style.left="0px",g.style.top="0px",g.style.height="100%",g.style.width="0px",b.content.appendChild(g),b.contentTimelines=g;var h=this.eventParams,i=this;h.onMouseDown||(h.onMouseDown=function(a){i.onMouseDown(a)},links.Timeline.addEventListener(b.content,"mousedown",h.onMouseDown)),h.onTouchStart||(h.onTouchStart=function(a){i.onTouchStart(a)},links.Timeline.addEventListener(b.content,"touchstart",h.onTouchStart)),h.onMouseWheel||(h.onMouseWheel=function(a){i.onMouseWheel(a)},links.Timeline.addEventListener(b.content,"mousewheel",h.onMouseWheel)),h.onDblClick||(h.onDblClick=function(a){i.onDblClick(a)},links.Timeline.addEventListener(b.content,"dblclick",h.onDblClick)),a=!0}return b.content.style.left=d.contentLeft+"px",b.content.style.top="0px",b.content.style.width=d.contentWidth+"px",b.content.style.height=d.frameHeight+"px",this.repaintNavigation(),a},links.Timeline.prototype.reflowAxis=function(){var a=!1,b=this.dom,c=this.options,d=this.size,e=b.axis,f=e&&e.characterMinor?e.characterMinor.clientWidth:0,g=e&&e.characterMinor?e.characterMinor.clientHeight:0,h=e&&e.characterMajor?e.characterMajor.clientWidth:0,i=e&&e.characterMajor?e.characterMajor.clientHeight:0,j=(c.showMinorLabels?g:0)+(c.showMajorLabels?i:0),k=c.axisOnTop?0:d.frameHeight-j,l=c.axisOnTop?j:k;a=a||d.axis.top!==k,a=a||d.axis.line!==l,a=a||d.axis.height!==j,d.axis.top=k,d.axis.line=l,d.axis.height=j,d.axis.labelMajorTop=c.axisOnTop?0:l+(c.showMinorLabels?g:0),d.axis.labelMinorTop=c.axisOnTop?c.showMajorLabels?i:0:l,d.axis.lineMinorTop=c.axisOnTop?d.axis.labelMinorTop:0,d.axis.lineMinorHeight=c.showMajorLabels?d.frameHeight-i:d.frameHeight,e&&e.minorLines&&e.minorLines.length?d.axis.lineMinorWidth=e.minorLines[0].offsetWidth:d.axis.lineMinorWidth=1,e&&e.majorLines&&e.majorLines.length?d.axis.lineMajorWidth=e.majorLines[0].offsetWidth:d.axis.lineMajorWidth=1,a=a||d.axis.characterMinorWidth!==f,a=a||d.axis.characterMinorHeight!==g,a=a||d.axis.characterMajorWidth!==h,a=a||d.axis.characterMajorHeight!==i,d.axis.characterMinorWidth=f,d.axis.characterMinorHeight=g,d.axis.characterMajorWidth=h,d.axis.characterMajorHeight=i;var m=Math.max(d.frameHeight-j,0);return d.contentLeft=c.groupsOnRight?0:d.groupsWidth,d.contentWidth=Math.max(d.frameWidth-d.groupsWidth,0),d.contentHeight=m,a},links.Timeline.prototype.repaintAxis=function(){var a=!1,b=this.dom,c=this.options,d=this.size,e=this.step,f=b.axis;f||(f={},b.axis=f),d.axis.properties||(d.axis.properties={}),f.minorTexts||(f.minorTexts=[]),f.minorLines||(f.minorLines=[]),f.majorTexts||(f.majorTexts=[]),f.majorLines||(f.majorLines=[]),f.frame||(f.frame=document.createElement("DIV"),f.frame.style.position="absolute",f.frame.style.left="0px",f.frame.style.top="0px",b.content.appendChild(f.frame)),b.content.removeChild(f.frame),f.frame.style.width=d.contentWidth+"px",f.frame.style.height=d.axis.height+"px";var g=this.screenToTime(0),h=this.screenToTime(d.contentWidth);d.axis.characterMinorWidth&&(this.minimumStep=this.screenToTime(6*d.axis.characterMinorWidth)-this.screenToTime(0),e.setRange(g,h,this.minimumStep));var i=this.repaintAxisCharacters();a=a||i,this.repaintAxisStartOverwriting(),e.start();for(var j=void 0,k=0;!e.end()&&k<1e3;){k++;var l=e.getCurrent(),m=this.timeToScreen(l),n=e.isMajor();c.showMinorLabels&&this.repaintAxisMinorText(m,e.getLabelMinor(c)),n&&c.showMajorLabels?(m>0&&(void 0==j&&(j=m),this.repaintAxisMajorText(m,e.getLabelMajor(c))),this.repaintAxisMajorLine(m)):this.repaintAxisMinorLine(m),e.next()}if(c.showMajorLabels){var o=this.screenToTime(0),p=this.step.getLabelMajor(c,o),q=p.length*d.axis.characterMajorWidth+10;(void 0==j||q<j)&&this.repaintAxisMajorText(0,p,o)}return this.repaintAxisEndOverwriting(),this.repaintAxisHorizontal(),b.content.insertBefore(f.frame,b.content.firstChild),a},links.Timeline.prototype.repaintAxisCharacters=function(){var a,b=!1,c=this.dom,d=c.axis;if(!d.characterMinor){a=document.createTextNode("0");var e=document.createElement("DIV");e.className="timeline-axis-text timeline-axis-text-minor",e.appendChild(a),e.style.position="absolute",e.style.visibility="hidden",e.style.paddingLeft="0px",e.style.paddingRight="0px",d.frame.appendChild(e),d.characterMinor=e,b=!0}if(!d.characterMajor){a=document.createTextNode("0");var f=document.createElement("DIV");f.className="timeline-axis-text timeline-axis-text-major",f.appendChild(a),f.style.position="absolute",f.style.visibility="hidden",f.style.paddingLeft="0px",f.style.paddingRight="0px",d.frame.appendChild(f),d.characterMajor=f,b=!0}return b},links.Timeline.prototype.repaintAxisStartOverwriting=function(){var a=this.size.axis.properties;a.minorTextNum=0,a.minorLineNum=0,a.majorTextNum=0,a.majorLineNum=0},links.Timeline.prototype.repaintAxisEndOverwriting=function(){var a,b=this.dom,c=this.size.axis.properties,d=this.dom.axis.frame,e=b.axis.minorTexts;for(a=c.minorTextNum;e.length>a;){var f=e[a];d.removeChild(f),e.splice(a,1)}var g=b.axis.minorLines;for(a=c.minorLineNum;g.length>a;){var h=g[a];d.removeChild(h),g.splice(a,1)}var i=b.axis.majorTexts;for(a=c.majorTextNum;i.length>a;){var j=i[a];d.removeChild(j),i.splice(a,1)}var k=b.axis.majorLines;for(a=c.majorLineNum;k.length>a;){var l=k[a];d.removeChild(l),k.splice(a,1)}},links.Timeline.prototype.repaintAxisHorizontal=function(){var a=this.dom.axis,b=this.size,c=this.options,d=c.showMinorLabels||c.showMajorLabels;if(d){if(!a.backgroundLine){var e=document.createElement("DIV");e.className="timeline-axis",e.style.position="absolute",e.style.left="0px",e.style.width="100%",e.style.border="none",a.frame.insertBefore(e,a.frame.firstChild),a.backgroundLine=e}a.backgroundLine&&(a.backgroundLine.style.top=b.axis.top+"px",a.backgroundLine.style.height=b.axis.height+"px")}else a.backgroundLine&&(a.frame.removeChild(a.backgroundLine),delete a.backgroundLine);if(d){if(a.line){var f=a.frame.removeChild(a.line);a.frame.appendChild(f)}else{var f=document.createElement("DIV");f.className="timeline-axis",f.style.position="absolute",f.style.left="0px",f.style.width="100%",f.style.height="0px",a.frame.appendChild(f),a.line=f}a.line.style.top=b.axis.line+"px"}else a.line&&a.line.parentElement&&(a.frame.removeChild(a.line),delete a.line)},links.Timeline.prototype.repaintAxisMinorText=function(a,b){var c,d=this.size,e=this.dom,f=d.axis.properties,g=e.axis.frame,h=e.axis.minorTexts,i=f.minorTextNum;if(i<h.length)c=h[i];else{var j=document.createTextNode("");c=document.createElement("DIV"),c.appendChild(j),c.className="timeline-axis-text timeline-axis-text-minor",c.style.position="absolute",g.appendChild(c),h.push(c)}c.childNodes[0].nodeValue=b,c.style.left=a+"px",c.style.top=d.axis.labelMinorTop+"px",f.minorTextNum++},links.Timeline.prototype.repaintAxisMinorLine=function(a){var b,c=this.size.axis,d=this.dom,e=c.properties,f=d.axis.frame,g=d.axis.minorLines,h=e.minorLineNum;h<g.length?b=g[h]:(b=document.createElement("DIV"),b.className="timeline-axis-grid timeline-axis-grid-minor",b.style.position="absolute",b.style.width="0px",f.appendChild(b),g.push(b)),b.style.top=c.lineMinorTop+"px",b.style.height=c.lineMinorHeight+"px",b.style.left=a-c.lineMinorWidth/2+"px",e.minorLineNum++},links.Timeline.prototype.repaintAxisMajorText=function(a,b){var c,d=this.size,e=d.axis.properties,f=this.dom.axis.frame,g=this.dom.axis.majorTexts,h=e.majorTextNum;if(h<g.length)c=g[h];else{var i=document.createTextNode(b);c=document.createElement("DIV"),c.className="timeline-axis-text timeline-axis-text-major",c.appendChild(i),c.style.position="absolute",c.style.top="0px",f.appendChild(c),g.push(c)}c.childNodes[0].nodeValue=b,c.style.top=d.axis.labelMajorTop+"px",c.style.left=a+"px",e.majorTextNum++},links.Timeline.prototype.repaintAxisMajorLine=function(a){var b,c=this.size,d=c.axis.properties,e=this.size.axis,f=this.dom.axis.frame,g=this.dom.axis.majorLines,h=d.majorLineNum;h<g.length?b=g[h]:(b=document.createElement("DIV"),b.className="timeline-axis-grid timeline-axis-grid-major",b.style.position="absolute",b.style.top="0px",b.style.width="0px",f.appendChild(b),g.push(b)),b.style.left=a-e.lineMajorWidth/2+"px",b.style.height=c.frameHeight+"px",d.majorLineNum++},links.Timeline.prototype.reflowItems=function(){var a,b,c,d=!1,e=this.groups,f=this.renderedItems;for(e&&e.forEach(function(a){a.itemsHeight=a.labelHeight||0}),a=0,b=f.length;a<b;a++){var g=f[a],h=g.dom;if(c=g.group,h){var i=h?h.clientWidth:0,j=h?h.clientHeight:0;d=d||g.width!=i,d=d||g.height!=j,g.width=i,g.height=j,g.reflow()}c&&(c.itemsHeight=Math.max(this.options.groupMinHeight,c.itemsHeight?Math.max(c.itemsHeight,g.height):g.height))}return d},links.Timeline.prototype.recalcItems=function(){var a,b,c,d,e,f,g=!1,h=this.groups,i=this.size,j=this.options,k=this.renderedItems,l=0;if(0==h.length){if(j.autoHeight||j.cluster){var m=0,n=0;if(this.stack&&this.stack.finalItems)for(e=this.stack.finalItems,d=e[0],d&&d.top&&(m=d.top,n=d.top+d.height),a=1,b=e.length;a<b;a++)d=e[a],m=Math.min(m,d.top),n=Math.max(n,d.top+d.height);else for(c=k[0],c&&c.top&&(m=c.top,n=c.top+c.height),a=1,b=k.length;a<b;a++)c=k[a],c.top&&(m=Math.min(m,c.top),n=Math.max(n,c.top+c.height));if(l=n-m+2*j.eventMarginAxis+i.axis.height,l<j.minHeight&&(l=j.minHeight),i.actualHeight!=l&&j.autoHeight&&!j.axisOnTop){var o=l-i.actualHeight;if(this.stack&&this.stack.finalItems)for(e=this.stack.finalItems,a=0,b=e.length;a<b;a++)e[a].top+=o,e[a].item.top+=o;else for(a=0,b=k.length;a<b;a++)k[a].top+=o}}}else{for(l=i.axis.height+2*j.eventMarginAxis,a=0,b=h.length;a<b;a++){f=h[a];var p=f.itemsHeight;g=g||p!=f.height,f.height=Math.max(p,j.groupMinHeight),l+=h[a].height+j.eventMargin}var q=j.eventMargin,r=j.axisOnTop?j.eventMarginAxis+q/2:i.contentHeight-j.eventMarginAxis+q/2,s=i.axis.height;for(a=0,b=h.length;a<b;a++)f=h[a],j.axisOnTop?(f.top=r+s,f.labelTop=r+s+(f.height-f.labelHeight)/2,f.lineTop=r+s+f.height+q/2,r+=f.height+q):(r-=f.height+q,f.top=r,f.labelTop=r+(f.height-f.labelHeight)/2,f.lineTop=r-q/2);g=!0}return l<j.minHeight&&(l=j.minHeight),g=g||l!=i.actualHeight,i.actualHeight=l,g},links.Timeline.prototype.clearItems=function(){var a=this.renderQueue.hide;this.renderedItems.forEach(function(b){a.push(b)}),this.clusterGenerator.clear(),this.items=[]},links.Timeline.prototype.repaintItems=function(){var a,b,c=!1,d=this.dom,e=this.size,f=this,g=this.renderedItems;d.items||(d.items={});var h=d.items.frame;h||(h=document.createElement("DIV"),h.style.position="relative",d.content.appendChild(h),d.items.frame=h),h.style.left="0px",h.style.top=e.items.top+"px",h.style.height="0px",d.content.removeChild(h);var i=this.renderQueue,j=[];for(c=c||i.show.length>0||i.update.length>0||i.hide.length>0;a=i.show.shift();)a.showDOM(h),a.getImageUrls(j),g.push(a);for(;a=i.update.shift();)a.updateDOM(h),a.getImageUrls(j),-1==(b=this.renderedItems.indexOf(a))&&g.push(a);for(;a=i.hide.shift();)a.hideDOM(h),-1!=(b=this.renderedItems.indexOf(a))&&g.splice(b,1);if(g.forEach(function(a){a.updatePosition(f)}),this.repaintDeleteButton(),this.repaintDragAreas(),d.content.appendChild(h),j.length){var k=function(){f.render()};links.imageloader.loadAll(j,k,!1)}return c},links.Timeline.prototype.reflowGroups=function(){for(var a=!1,b=this.options,c=this.size,d=this.dom,e=0,f=this.groups,g=this.dom.groups?this.dom.groups.labels:[],h=0,i=f.length;h<i;h++){var j=f[h],k=g[h];j.labelWidth=k?k.clientWidth:0,j.labelHeight=k?k.clientHeight:0,j.width=j.labelWidth,e=Math.max(e,j.width)}void 0!==b.groupsWidth&&(e=d.groups&&d.groups.frame?d.groups.frame.clientWidth:0),e+=1;var l=b.groupsOnRight?c.frameWidth-e:0;return a=a||c.groupsWidth!==e,a=a||c.groupsLeft!==l,c.groupsWidth=e,c.groupsLeft=l,a},links.Timeline.prototype.repaintGroups=function(){var a=this.dom,b=this,c=this.options,d=this.size,e=this.groups;void 0===a.groups&&(a.groups={});var f=a.groups.labels;f||(f=[],a.groups.labels=f);var g=a.groups.labelLines;g||(g=[],a.groups.labelLines=g);var h=a.groups.itemLines;h||(h=[],a.groups.itemLines=h);var i=a.groups.frame;i||(i=document.createElement("DIV"),i.className="timeline-groups-axis",i.style.position="absolute",i.style.overflow="hidden",i.style.top="0px",i.style.height="100%",a.frame.appendChild(i),a.groups.frame=i),i.style.left=d.groupsLeft+"px",i.style.width=void 0!==c.groupsWidth?c.groupsWidth:d.groupsWidth+"px",0==e.length?i.style.display="none":i.style.display="";for(var j=f.length,k=e.length,l=0,m=Math.min(j,k);l<m;l++){var n=e[l],o=f[l];o.innerHTML=this.getGroupName(n),o.style.display=""}for(var l=j;l<k;l++){var n=e[l],o=document.createElement("DIV");o.className="timeline-groups-text",o.style.position="absolute",void 0===c.groupsWidth&&(o.style.whiteSpace="nowrap"),o.innerHTML=this.getGroupName(n),i.appendChild(o),f[l]=o;var p=document.createElement("DIV");p.className="timeline-axis-grid timeline-axis-grid-minor",p.style.position="absolute",p.style.left="0px",p.style.width="100%",p.style.height="0px",p.style.borderTopStyle="solid",i.appendChild(p),g[l]=p;var q=document.createElement("DIV");q.className="timeline-axis-grid timeline-axis-grid-minor",q.style.position="absolute",q.style.left="0px",q.style.width="100%",q.style.height="0px",q.style.borderTopStyle="solid",a.content.insertBefore(q,a.content.firstChild),h[l]=q}for(var l=k;l<j;l++){var o=f[l],p=g[l],q=h[l];i.removeChild(o),i.removeChild(p),a.content.removeChild(q)}f.splice(k,j-k),g.splice(k,j-k),h.splice(k,j-k),links.Timeline.addClassName(i,c.groupsOnRight?"timeline-groups-axis-onright":"timeline-groups-axis-onleft");for(var l=0,m=e.length;l<m;l++){var n=e[l],o=f[l],p=g[l],q=h[l];o.style.top=n.labelTop+"px",p.style.top=n.lineTop+"px",q.style.top=n.lineTop+"px",q.style.width=d.contentWidth+"px"}if(!a.groups.background){var r=document.createElement("DIV");r.className="timeline-axis",r.style.position="absolute",r.style.left="0px",r.style.width="100%",r.style.border="none",i.appendChild(r),a.groups.background=r}if(a.groups.background.style.top=d.axis.top+"px",a.groups.background.style.height=d.axis.height+"px",!a.groups.line){var s=document.createElement("DIV");s.className="timeline-axis",s.style.position="absolute",s.style.left="0px",s.style.width="100%",s.style.height="0px",i.appendChild(s),a.groups.line=s}if(a.groups.line.style.top=d.axis.line+"px",a.groups.frame&&e.length){var t=[];if(links.imageloader.filterImageUrls(a.groups.frame,t),t.length){var u=function(){b.render()};links.imageloader.loadAll(t,u,!1)}}},links.Timeline.prototype.repaintCurrentTime=function(){var a=this.options,b=this.dom,c=this.size;if(!a.showCurrentTime)return void(b.currentTime&&(b.contentTimelines.removeChild(b.currentTime),delete b.currentTime));if(!b.currentTime){var d=document.createElement("DIV");d.className="timeline-currenttime",d.style.position="absolute",d.style.top="0px",d.style.height="100%",b.contentTimelines.appendChild(d),b.currentTime=d}var e=new Date,f=new Date(e.valueOf()+this.clientTimeOffset),g=this.timeToScreen(f),h=g>-c.contentWidth&&g<2*c.contentWidth;b.currentTime.style.display=h?"":"none",b.currentTime.style.left=g+"px",b.currentTime.title="Current time: "+f,void 0!=this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer);var i=this,j=function(){i.repaintCurrentTime()},k=1/this.conversion.factor/2;k<30&&(k=30),this.currentTimeTimer=setTimeout(j,k)},links.Timeline.prototype.repaintCustomTime=function(){var a=this.options,b=this.dom,c=this.size;if(!a.showCustomTime)return void(b.customTime&&(b.contentTimelines.removeChild(b.customTime),delete b.customTime));if(!b.customTime){var d=document.createElement("DIV");d.className="timeline-customtime",d.style.position="absolute",d.style.top="0px",d.style.height="100%";var e=document.createElement("DIV");e.style.position="relative",e.style.top="0px",e.style.left="-10px",e.style.height="100%",e.style.width="20px",d.appendChild(e),b.contentTimelines.appendChild(d),b.customTime=d,this.customTime=new Date}var f=this.timeToScreen(this.customTime),g=f>-c.contentWidth&&f<2*c.contentWidth;b.customTime.style.display=g?"":"none",b.customTime.style.left=f+"px",b.customTime.title="Time: "+this.customTime},links.Timeline.prototype.repaintDeleteButton=function(){var a=this.dom,b=a.items.frame,c=a.items.deleteButton;c||(c=document.createElement("DIV"),c.className="timeline-navigation-delete",c.style.position="absolute",b.appendChild(c),a.items.deleteButton=c);var d=this.selection&&void 0!==this.selection.index?this.selection.index:-1,e=this.selection&&void 0!==this.selection.index?this.items[d]:void 0;if(e&&e.rendered&&this.isEditable(e)){var f=e.getRight(this),g=e.top;c.style.left=f+"px",c.style.top=g+"px",c.style.display="",b.removeChild(c),b.appendChild(c)}else c.style.display="none"},links.Timeline.prototype.repaintDragAreas=function(){var a=this.options,b=this.dom,c=this.dom.items.frame,d=b.items.dragLeft;d||(d=document.createElement("DIV"),d.className="timeline-event-range-drag-left",d.style.position="absolute",c.appendChild(d),b.items.dragLeft=d);var e=b.items.dragRight;e||(e=document.createElement("DIV"),e.className="timeline-event-range-drag-right",e.style.position="absolute",c.appendChild(e),b.items.dragRight=e);var f=this.selection&&void 0!==this.selection.index?this.selection.index:-1,g=this.selection&&void 0!==this.selection.index?this.items[f]:void 0;if(g&&g.rendered&&this.isEditable(g)&&(g instanceof links.Timeline.ItemRange||g instanceof links.Timeline.ItemFloatingRange)){var h=g.getLeft(this),i=g.getRight(this),j=g.top,k=g.height;d.style.left=h+"px",d.style.top=j+"px",d.style.width=a.dragAreaWidth+"px",d.style.height=k+"px",d.style.display="",c.removeChild(d),c.appendChild(d),e.style.left=i-a.dragAreaWidth+"px",e.style.top=j+"px",e.style.width=a.dragAreaWidth+"px",e.style.height=k+"px",e.style.display="",c.removeChild(e),c.appendChild(e)}else d.style.display="none",e.style.display="none"},links.Timeline.prototype.repaintNavigation=function(){var a=this,b=this.options,c=this.dom,d=c.frame,e=c.navBar;if(!e){var f=b.showButtonNew&&b.editable,g=b.showNavigation&&(b.zoomable||b.moveable);if((g||f)&&(e=document.createElement("DIV"),e.style.position="absolute",e.className="timeline-navigation ui-widget ui-state-highlight ui-corner-all",b.groupsOnRight?e.style.left="10px":e.style.right="10px",b.axisOnTop?e.style.bottom="10px":e.style.top="10px",c.navBar=e,d.appendChild(e)),f){e.addButton=document.createElement("DIV"),e.addButton.className="timeline-navigation-new",e.addButton.title=b.CREATE_NEW_EVENT;var h=document.createElement("SPAN");h.className="ui-icon ui-icon-circle-plus",e.addButton.appendChild(h);var i=function(c){links.Timeline.preventDefault(c),links.Timeline.stopPropagation(c);var d=a.size.contentWidth,e=d/2,f=a.screenToTime(e);b.snapEvents&&a.step.snap(f);var g=b.NEW,h=a.groups.length?a.groups[0].content:void 0;a.addItem({start:f,content:g,group:h},!0);var i=a.items.length-1;a.selectItem(i),a.applyAdd=!0,a.trigger("add"),a.applyAdd?(a.render({animate:!1}),a.selectItem(i)):a.deleteItem(i)};links.Timeline.addEventListener(e.addButton,"mousedown",i),e.appendChild(e.addButton)}if(f&&g&&links.Timeline.addClassName(e.addButton,"timeline-navigation-new-line"),g){if(b.zoomable){e.zoomInButton=document.createElement("DIV"),e.zoomInButton.className="timeline-navigation-zoom-in",e.zoomInButton.title=this.options.ZOOM_IN;var j=document.createElement("SPAN");j.className="ui-icon ui-icon-circle-zoomin",e.zoomInButton.appendChild(j);var k=function(b){links.Timeline.preventDefault(b),links.Timeline.stopPropagation(b),a.zoom(.4),a.trigger("rangechange"),a.trigger("rangechanged")};links.Timeline.addEventListener(e.zoomInButton,"mousedown",k),e.appendChild(e.zoomInButton),e.zoomOutButton=document.createElement("DIV"),e.zoomOutButton.className="timeline-navigation-zoom-out",e.zoomOutButton.title=this.options.ZOOM_OUT;var l=document.createElement("SPAN");l.className="ui-icon ui-icon-circle-zoomout",e.zoomOutButton.appendChild(l);var m=function(b){links.Timeline.preventDefault(b),links.Timeline.stopPropagation(b),a.zoom(-.4),a.trigger("rangechange"),a.trigger("rangechanged")};links.Timeline.addEventListener(e.zoomOutButton,"mousedown",m),e.appendChild(e.zoomOutButton)}if(b.moveable){e.moveLeftButton=document.createElement("DIV"),e.moveLeftButton.className="timeline-navigation-move-left",e.moveLeftButton.title=this.options.MOVE_LEFT;var n=document.createElement("SPAN");n.className="ui-icon ui-icon-circle-arrow-w",e.moveLeftButton.appendChild(n);var o=function(b){links.Timeline.preventDefault(b),links.Timeline.stopPropagation(b),a.move(-.2),a.trigger("rangechange"),a.trigger("rangechanged")};links.Timeline.addEventListener(e.moveLeftButton,"mousedown",o),e.appendChild(e.moveLeftButton),e.moveRightButton=document.createElement("DIV"),e.moveRightButton.className="timeline-navigation-move-right",e.moveRightButton.title=this.options.MOVE_RIGHT;var p=document.createElement("SPAN");p.className="ui-icon ui-icon-circle-arrow-e",e.moveRightButton.appendChild(p);var q=function(b){links.Timeline.preventDefault(b),links.Timeline.stopPropagation(b),a.move(.2),a.trigger("rangechange"),a.trigger("rangechanged")};links.Timeline.addEventListener(e.moveRightButton,"mousedown",q),e.appendChild(e.moveRightButton)}}}},links.Timeline.prototype.setCurrentTime=function(a){var b=new Date;this.clientTimeOffset=a.valueOf()-b.valueOf(),this.repaintCurrentTime()},links.Timeline.prototype.getCurrentTime=function(){var a=new Date;return new Date(a.valueOf()+this.clientTimeOffset)},links.Timeline.prototype.setCustomTime=function(a){this.customTime=new Date(a.valueOf()),this.repaintCustomTime()},links.Timeline.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},links.Timeline.prototype.setScale=function(a,b){this.step.setScale(a,b),this.render()},links.Timeline.prototype.setAutoScale=function(a){this.step.setAutoScale(a),this.render()},links.Timeline.prototype.redraw=function(){this.setData(this.data)},links.Timeline.prototype.checkResize=function(){this.render()},links.Timeline.prototype.isEditable=function(a){return!!a&&(void 0!=a.editable?a.editable:this.options.editable)},links.Timeline.prototype.recalcConversion=function(){this.conversion.offset=this.start.valueOf(),this.conversion.factor=this.size.contentWidth/(this.end.valueOf()-this.start.valueOf())},links.Timeline.prototype.screenToTime=function(a){var b=this.conversion;return new Date(a/b.factor+b.offset)},links.Timeline.prototype.timeToScreen=function(a){var b=this.conversion;return(a.valueOf()-b.offset)*b.factor},links.Timeline.prototype.onTouchStart=function(a){var b=this.eventParams;if(!b.touchDown){b.touchDown=!0,b.zoomed=!1,this.onMouseDown(a);var c=links.Timeline.getTarget(a),d=this.getItemIndex(c);b.doubleTapStartPrev=b.doubleTapStart,b.doubleTapStart=(new Date).valueOf(),b.doubleTapItemPrev=b.doubleTapItem,b.doubleTapItem=d,links.Timeline.preventDefault(a)}},links.Timeline.prototype.onTouchMove=function(a){var b=this.eventParams;if(a.scale&&1!==a.scale&&(b.zoomed=!0),b.zoomed){if(this.options.zoomable){b.zoomed=!0;var c=a.scale,d=b.end.valueOf()-b.start.valueOf(),e=d/c,f=e-d,g=new Date(parseInt(b.start.valueOf()-f/2)),h=new Date(parseInt(b.end.valueOf()+f/2));this.setVisibleChartRange(g,h),this.trigger("rangechange")}}else this.onMouseMove(a);links.Timeline.preventDefault(a)},links.Timeline.prototype.onTouchEnd=function(a){var b=this.eventParams,c=this;b.touchDown=!1,b.zoomed&&this.trigger("rangechanged"),b.onTouchMove&&(links.Timeline.removeEventListener(document,"touchmove",b.onTouchMove),delete b.onTouchMove),b.onTouchEnd&&(links.Timeline.removeEventListener(document,"touchend",b.onTouchEnd),delete b.onTouchEnd),this.onMouseUp(a);var d=(new Date).valueOf(),e=links.Timeline.getTarget(a);this.getItemIndex(e);b.doubleTapStartPrev&&d-b.doubleTapStartPrev<500&&b.doubleTapItem==b.doubleTapItemPrev&&(b.touchDown=!0,c.onDblClick(a),b.touchDown=!1),links.Timeline.preventDefault(a)},links.Timeline.prototype.onMouseDown=function(a){a=a||window.event;var b=this.eventParams,c=this.options,d=this.dom;if((a.which?1==a.which:1==a.button)||b.touchDown){b.mouseX=links.Timeline.getPageX(a),b.mouseY=links.Timeline.getPageY(a),b.frameLeft=links.Timeline.getAbsoluteLeft(this.dom.content),b.frameTop=links.Timeline.getAbsoluteTop(this.dom.content),b.previousLeft=0,b.previousOffset=0,b.moved=!1,b.start=new Date(this.start.valueOf()),b.end=new Date(this.end.valueOf()),b.target=links.Timeline.getTarget(a);var e=d.items&&d.items.dragLeft?d.items.dragLeft:void 0,f=d.items&&d.items.dragRight?d.items.dragRight:void 0;if(b.itemDragLeft=b.target===e,b.itemDragRight=b.target===f,b.itemDragLeft||b.itemDragRight?(b.itemIndex=this.selection&&void 0!==this.selection.index?this.selection.index:void 0,delete b.clusterIndex):(b.itemIndex=this.getItemIndex(b.target),b.clusterIndex=this.getClusterIndex(b.target)),b.customTime=b.target===d.customTime||b.target.parentNode===d.customTime?this.customTime:void 0,b.addItem=c.editable&&a.ctrlKey,b.addItem){var g=b.mouseX-b.frameLeft,h=b.mouseY-b.frameTop,i=this.screenToTime(g);c.snapEvents&&this.step.snap(i);var j=new Date(i.valueOf()),k=c.NEW,l=this.getGroupFromHeight(h);this.addItem({start:i,end:j,content:k,group:this.getGroupName(l)}),b.itemIndex=this.items.length-1,delete b.clusterIndex,this.selectItem(b.itemIndex),b.itemDragRight=!0}var m=this.items[b.itemIndex],n=this.isSelected(b.itemIndex);if(b.editItem=n&&this.isEditable(m),b.editItem?(b.itemStart=m.start,b.itemEnd=m.end,b.itemGroup=m.group,b.itemLeft=m.getLeft(this),b.itemRight=m.getRight(this)):this.dom.frame.style.cursor="move",!b.touchDown){var o=this;b.onMouseMove||(b.onMouseMove=function(a){o.onMouseMove(a)},links.Timeline.addEventListener(document,"mousemove",b.onMouseMove)),b.onMouseUp||(b.onMouseUp=function(a){o.onMouseUp(a)},links.Timeline.addEventListener(document,"mouseup",b.onMouseUp)),links.Timeline.preventDefault(a)}}},links.Timeline.prototype.onMouseMove=function(a){a=a||window.event;var b=this.eventParams,c=this.size,d=this.dom,e=this.options,f=links.Timeline.getPageX(a),g=links.Timeline.getPageY(a);void 0==b.mouseX&&(b.mouseX=f),void 0==b.mouseY&&(b.mouseY=g);var h=f-b.mouseX;b.mouseY;if(Math.abs(h)>=1&&(b.moved=!0),b.customTime){var i=this.timeToScreen(b.customTime),j=i+h;this.customTime=this.screenToTime(j),this.repaintCustomTime(),this.trigger("timechange")}else if(b.editItem){var k,l,m=this.items[b.itemIndex];b.itemDragLeft&&e.timeChangeable?(k=b.itemLeft+h,l=b.itemRight,m.start=this.screenToTime(k),e.snapEvents&&(this.step.snap(m.start),k=this.timeToScreen(m.start)),k>l&&(k=l,m.start=this.screenToTime(k)),this.trigger("change")):b.itemDragRight&&e.timeChangeable?(k=b.itemLeft,l=b.itemRight+h,m.end=this.screenToTime(l),e.snapEvents&&(this.step.snap(m.end),l=this.timeToScreen(m.end)),l<k&&(l=k,m.end=this.screenToTime(l)),this.trigger("change")):e.timeChangeable&&(k=b.itemLeft+h,m.start=this.screenToTime(k),e.snapEvents&&(this.step.snap(m.start),k=this.timeToScreen(m.start)),m.end&&(l=k+(b.itemRight-b.itemLeft),m.end=this.screenToTime(l)),this.trigger("change")),m.setPosition(k,l);var n=b.itemDragLeft||b.itemDragRight;if(this.groups.length&&!n){var o=g-b.frameTop,p=this.getGroupFromHeight(o);if(e.groupsChangeable&&m.group!==p){var q=this.items.indexOf(m);this.changeItem(q,{group:this.getGroupName(p)})}else this.repaintDeleteButton(),this.repaintDragAreas()}else this.render()}else if(e.moveable){var r=b.end.valueOf()-b.start.valueOf(),s=Math.round(-h/c.contentWidth*r),t=new Date(b.start.valueOf()+s),u=new Date(b.end.valueOf()+s);this.applyRange(t,u);var v=this.start.valueOf()-t.valueOf();v&&(s+=v),this.recalcConversion();var w=b.previousLeft||0,x=parseFloat(d.items.frame.style.left)||0,y=b.previousOffset||0,z=y+(x-w),A=-s/r*c.contentWidth+z;d.items.frame.style.left=A+"px",b.previousOffset=z,b.previousLeft=parseFloat(d.items.frame.style.left)||A,this.repaintCurrentTime(),this.repaintCustomTime(),this.repaintAxis(),this.trigger("rangechange")}links.Timeline.preventDefault(a)},links.Timeline.prototype.onMouseUp=function(a){var b=this.eventParams,c=this.options;if(a=a||window.event,this.dom.frame.style.cursor="auto",b.onMouseMove&&(links.Timeline.removeEventListener(document,"mousemove",b.onMouseMove),delete b.onMouseMove),b.onMouseUp&&(links.Timeline.removeEventListener(document,"mouseup",b.onMouseUp),delete b.onMouseUp),b.customTime)this.trigger("timechanged");else if(b.editItem){var d=this.items[b.itemIndex];if(b.moved||b.addItem){if(this.applyChange=!0,this.applyAdd=!0,this.updateData(b.itemIndex,{start:d.start,end:d.end}),this.trigger(b.addItem?"add":"changed"),d=this.items[b.itemIndex],b.addItem)this.applyAdd?this.updateData(b.itemIndex,{start:d.start,end:d.end,content:d.content,group:this.getGroupName(d.group)}):this.deleteItem(b.itemIndex);else if(this.applyChange)this.updateData(b.itemIndex,{start:d.start,end:d.end});else{delete this.applyChange,delete this.applyAdd;var d=this.items[b.itemIndex];d.dom;d.start=b.itemStart,d.end=b.itemEnd,d.group=b.itemGroup,d.setPosition(b.itemLeft,b.itemRight),this.updateData(b.itemIndex,{start:b.itemStart,end:b.itemEnd})}this.options.cluster&&this.clusterGenerator.updateData(),this.render()}}else b.moved||b.zoomed?(b.moved&&c.moveable||b.zoomed&&c.zoomable)&&this.trigger("rangechanged"):b.target===this.dom.items.deleteButton?this.selection&&void 0!==this.selection.index&&this.confirmDeleteItem(this.selection.index):c.selectable&&(void 0!=b.itemIndex?this.isSelected(b.itemIndex)||(this.selectItem(b.itemIndex),this.trigger("select")):void 0!=b.clusterIndex?(this.selectCluster(b.clusterIndex),this.trigger("select")):c.unselectable&&(this.unselectItem(),this.trigger("select")))},links.Timeline.prototype.onDblClick=function(a){var b=this.eventParams,c=this.options,d=this.dom;this.size;if(a=a||window.event,void 0!=b.itemIndex){var e=this.items[b.itemIndex];e&&this.isEditable(e)&&this.trigger("edit")}else if(c.editable){b.mouseX=links.Timeline.getPageX(a),b.mouseY=links.Timeline.getPageY(a);var f=b.mouseX-links.Timeline.getAbsoluteLeft(d.content),g=b.mouseY-links.Timeline.getAbsoluteTop(d.content),h=this.screenToTime(f);c.snapEvents&&this.step.snap(h);var i=c.NEW,j=this.getGroupFromHeight(g),k=!0;this.addItem({start:h,content:i,group:this.getGroupName(j)},k),b.itemIndex=this.items.length-1,this.selectItem(b.itemIndex),this.applyAdd=!0,this.trigger("add"),this.applyAdd?(this.render({animate:!1}),this.selectItem(b.itemIndex)):this.deleteItem(b.itemIndex)}links.Timeline.preventDefault(a)},links.Timeline.prototype.onMouseWheel=function(a){if(this.options.zoomable){a||(a=window.event);var b=0;if(a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3),b){var c=this,d=function(){var d=b/5,e=links.Timeline.getAbsoluteLeft(c.dom.content),f=links.Timeline.getPageX(a),g=void 0!=f&&void 0!=e?c.screenToTime(f-e):void 0;c.zoom(d,g),c.trigger("rangechange"),c.trigger("rangechanged")},e=function(){c.move(-.2*b),c.trigger("rangechange"),c.trigger("rangechanged")};a.shiftKey?e():d()}links.Timeline.preventDefault(a)}},links.Timeline.prototype.zoom=function(a,b){void 0==b&&(b=new Date((this.start.valueOf()+this.end.valueOf())/2)),a>=1&&(a=.9),a<=-1&&(a=-.9),a<0&&(a/=1+a);var c=this.start.valueOf()-b,d=this.end.valueOf()-b,e=new Date(this.start.valueOf()-c*a),f=new Date(this.end.valueOf()-d*a),g=f.valueOf()-e.valueOf(),h=Number(this.options.zoomMin)||10;h<10&&(h=10),g>=h&&(this.applyRange(e,f,b),this.render({animate:this.options.animate&&this.options.animateZoom}))},links.Timeline.prototype.move=function(a){var b=this.end.valueOf()-this.start.valueOf(),c=new Date(this.start.valueOf()+b*a),d=new Date(this.end.valueOf()+b*a);this.applyRange(c,d),this.render()},links.Timeline.prototype.applyRange=function(a,b,c){var d=a.valueOf(),e=b.valueOf(),f=e-d,g=this.options,h=31536e6,i=Number(g.zoomMin)||10;i<10&&(i=10);var j=Number(g.zoomMax)||1e4*h;j>1e4*h&&(j=1e4*h),j<i&&(j=i);var k=g.min?g.min.valueOf():void 0,l=g.max?g.max.valueOf():void 0;if(void 0!=k&&void 0!=l){if(k>=l){l=k+864e5}j>l-k&&(j=l-k),i>l-k&&(i=l-k)}if(d>=e&&(e+=864e5),f<i){var m=i-f,n=c?(c.valueOf()-d)/f:.5;d-=Math.round(m*n),e+=Math.round(m*(1-n))}if(f>j){var m=f-j,n=c?(c.valueOf()-d)/f:.5;d+=Math.round(m*n),e-=Math.round(m*(1-n))}if(void 0!=k){var m=d-k;m<0&&(d-=m,e-=m)}if(void 0!=l){var m=l-e;m<0&&(d+=m,e+=m)}this.start=new Date(d),this.end=new Date(e)},links.Timeline.prototype.confirmDeleteItem=function(a){this.applyDelete=!0,this.isSelected(a)||this.selectItem(a),this.trigger("delete"),this.applyDelete&&this.deleteItem(a),delete this.applyDelete},links.Timeline.prototype.deleteItem=function(a,b){if(a>=this.items.length)throw"Cannot delete row, index out of range";this.selection&&void 0!==this.selection.index&&(this.selection.index==a?this.unselectItem():this.selection.index>a&&this.selection.index--);var c=this.items.splice(a,1)[0];if(this.renderQueue.hide.push(c),this.data)if(google&&google.visualization&&this.data instanceof google.visualization.DataTable)this.data.removeRow(a);else{if(!links.Timeline.isArray(this.data))throw"Cannot delete row from data, unknown data type";this.data.splice(a,1)}this.options.cluster&&this.clusterGenerator.updateData(),b||this.render()},links.Timeline.prototype.deleteAllItems=function(){if(this.unselectItem(),this.clearItems(),this.deleteGroups(),this.data)if(google&&google.visualization&&this.data instanceof google.visualization.DataTable)this.data.removeRows(0,this.data.getNumberOfRows());else{if(!links.Timeline.isArray(this.data))throw"Cannot delete row from data, unknown data type";this.data.splice(0,this.data.length)}this.options.cluster&&this.clusterGenerator.updateData(),this.render()},links.Timeline.prototype.getGroupFromHeight=function(a){var b,c,d=this.groups;if(d.length){if(this.options.axisOnTop){for(b=d.length-1;b>=0;b--)if(c=d[b],a>c.top)return c}else for(b=0;b<d.length;b++)if(c=d[b],a>c.top)return c;return c}},links.Timeline.Item=function(a,b){if(a&&(this.start=a.start,this.end=a.end,this.title=a.title,this.content=a.content,this.image=a.image,this.className=a.className,this.editable=a.editable,this.group=a.group,this.type=a.type),this.top=0,this.left=0,this.width=0,this.height=0,this.lineWidth=0,this.dotWidth=0,this.dotHeight=0,this.rendered=!1,b)for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])},links.Timeline.Item.prototype.reflow=function(){return!1},links.Timeline.Item.prototype.getImageUrls=function(a){this.dom&&links.imageloader.filterImageUrls(this.dom,a)},links.Timeline.Item.prototype.select=function(){},links.Timeline.Item.prototype.unselect=function(){},links.Timeline.Item.prototype.createDOM=function(){},links.Timeline.Item.prototype.showDOM=function(a){},links.Timeline.Item.prototype.hideDOM=function(a){},links.Timeline.Item.prototype.updateDOM=function(){},links.Timeline.Item.prototype.updatePosition=function(a){},links.Timeline.Item.prototype.isRendered=function(){return this.rendered},links.Timeline.Item.prototype.isVisible=function(a,b){return!0},links.Timeline.Item.prototype.setPosition=function(a,b){},links.Timeline.Item.prototype.getLeft=function(a){return 0},links.Timeline.Item.prototype.getRight=function(a){return 0},links.Timeline.Item.prototype.getWidth=function(a){return this.width||0},links.Timeline.ItemBox=function(a,b){links.Timeline.Item.call(this,a,b)},links.Timeline.ItemBox.prototype=new links.Timeline.Item,links.Timeline.ItemBox.prototype.reflow=function(){var a=this.dom,b=a.dot.offsetHeight,c=a.dot.offsetWidth,d=a.line.offsetWidth,e=this.dotHeight!=b||this.dotWidth!=c||this.lineWidth!=d;return this.dotHeight=b,this.dotWidth=c,this.lineWidth=d,e},links.Timeline.ItemBox.prototype.select=function(){var a=this.dom;links.Timeline.addClassName(a,"timeline-event-selected ui-state-active"),links.Timeline.addClassName(a.line,"timeline-event-selected ui-state-active"),links.Timeline.addClassName(a.dot,"timeline-event-selected ui-state-active")},links.Timeline.ItemBox.prototype.unselect=function(){var a=this.dom;links.Timeline.removeClassName(a,"timeline-event-selected ui-state-active"),links.Timeline.removeClassName(a.line,"timeline-event-selected ui-state-active"),links.Timeline.removeClassName(a.dot,"timeline-event-selected ui-state-active")},links.Timeline.ItemBox.prototype.createDOM=function(){var a=document.createElement("DIV");a.style.position="absolute",a.style.left=this.left+"px",a.style.top=this.top+"px";var b=document.createElement("DIV");b.className="timeline-event-content",b.innerHTML="<a href='test111'>"+this.content+"</a>",a.appendChild(b);var c=document.createElement("DIV");c.style.position="absolute",c.style.width="0px",a.line=c;var d=document.createElement("DIV");return d.style.position="absolute",d.style.width="0px",d.style.height="0px",a.dot=d,this.dom=a,this.updateDOM(),a},links.Timeline.ItemBox.prototype.showDOM=function(a){var b=this.dom;b||(b=this.createDOM()),b.parentNode!=a&&(b.parentNode&&this.hideDOM(),a.appendChild(b),a.insertBefore(b.line,a.firstChild),a.appendChild(b.dot),this.rendered=!0)},links.Timeline.ItemBox.prototype.hideDOM=function(){var a=this.dom;a&&(a.parentNode&&a.parentNode.removeChild(a),a.line&&a.line.parentNode&&a.line.parentNode.removeChild(a.line),a.dot&&a.dot.parentNode&&a.dot.parentNode.removeChild(a.dot),this.rendered=!1)},links.Timeline.ItemBox.prototype.updateDOM=function(){var a=this.dom;if(a){var b=a.line,c=a.dot;a.firstChild.innerHTML="<a href='test222'>"+this.content+"</a>",a.className="timeline-event timeline-event-box ui-widget ui-state-default",b.className="timeline-event timeline-event-line ui-widget ui-state-default",c.className="timeline-event timeline-event-dot ui-widget ui-state-default",this.isCluster&&(links.Timeline.addClassName(a,"timeline-event-cluster ui-widget-header"),links.Timeline.addClassName(b,"timeline-event-cluster ui-widget-header"),links.Timeline.addClassName(c,"timeline-event-cluster ui-widget-header")),this.className&&(links.Timeline.addClassName(a,this.className),links.Timeline.addClassName(b,this.className),links.Timeline.addClassName(c,this.className))}},links.Timeline.ItemBox.prototype.updatePosition=function(a){var b=this.dom;if(b){var c=a.timeToScreen(this.start),d=a.options.axisOnTop,e=a.size.axis.top,f=a.size.axis.height,g=a.options.box&&a.options.box.align?a.options.box.align:void 0;b.style.top=this.top+"px",b.style.left="right"==g?c-this.width+"px":"left"==g?c+"px":c-this.width/2+"px";var h=b.line,i=b.dot;h.style.left=c-this.lineWidth/2+"px",i.style.left=c-this.dotWidth/2+"px",d?(h.style.top=f+"px",h.style.height=Math.max(this.top-f,0)+"px",i.style.top=f-this.dotHeight/2+"px"):(h.style.top=this.top+this.height+"px",h.style.height=Math.max(e-this.top-this.height,0)+"px",i.style.top=e-this.dotHeight/2+"px")}},links.Timeline.ItemBox.prototype.isVisible=function(a,b){return!0},links.Timeline.ItemBox.prototype.setPosition=function(a,b){var c=this.dom;c.style.left=a-this.width/2+"px",c.line.style.left=a-this.lineWidth/2+"px",c.dot.style.left=a-this.dotWidth/2+"px",this.group&&(this.top=this.group.top,c.style.top=this.top+"px")},links.Timeline.ItemBox.prototype.getLeft=function(a){var b=a.options.box&&a.options.box.align?a.options.box.align:void 0,c=a.timeToScreen(this.start);return c-="right"==b?width:this.width/2},links.Timeline.ItemBox.prototype.getRight=function(a){var b=a.options.box&&a.options.box.align?a.options.box.align:void 0,c=a.timeToScreen(this.start);return"right"==b?c:"left"==b?c+this.width:c+this.width/2},links.Timeline.ItemRange=function(a,b){links.Timeline.Item.call(this,a,b)},links.Timeline.ItemRange.prototype=new links.Timeline.Item,links.Timeline.ItemRange.prototype.select=function(){var a=this.dom;links.Timeline.addClassName(a,"timeline-event-selected ui-state-active")},links.Timeline.ItemRange.prototype.unselect=function(){var a=this.dom;links.Timeline.removeClassName(a,"timeline-event-selected ui-state-active")},links.Timeline.ItemRange.prototype.createDOM=function(){var a=document.createElement("DIV");a.style.position="absolute";var b=document.createElement("DIV");return b.className="timeline-event-content",a.appendChild(b),this.dom=a,this.updateDOM(),a},links.Timeline.ItemRange.prototype.showDOM=function(a){var b=this.dom;b||(b=this.createDOM()),b.parentNode!=a&&(b.parentNode&&this.hideDOM(),a.appendChild(b),this.rendered=!0)},links.Timeline.ItemRange.prototype.hideDOM=function(){var a=this.dom;a&&(a.parentNode&&a.parentNode.removeChild(a),this.rendered=!1)},links.Timeline.ItemRange.prototype.updateDOM=function(){var a=this.dom;a&&(a.firstChild.innerHTML="<div class='the-image' style='background-image:url("+this.image+");'></div><div class='the-content'><h1>"+this.title+"</h1>"+this.content+"</div>",a.className="timeline-event "+this.className+" timeline-event-range ui-widget ui-state-default",this.isCluster&&links.Timeline.addClassName(a,"timeline-event-cluster ui-widget-header"),this.className&&links.Timeline.addClassName(a,this.className))},links.Timeline.ItemRange.prototype.updatePosition=function(a){var b=this.dom;if(b){var c=(a.size.contentWidth,a.timeToScreen(this.start)),d=a.timeToScreen(this.end);b.style.top=this.top+"px",b.style.left=c+"px",b.style.width=Math.max(d-c,1)+"px"}},links.Timeline.ItemRange.prototype.isVisible=function(a,b){return!0},links.Timeline.ItemRange.prototype.setPosition=function(a,b){var c=this.dom;c.style.left=a+"px",c.style.width=b-a+"px",this.group&&(this.top=this.group.top,c.style.top=this.top+"px")},links.Timeline.ItemRange.prototype.getLeft=function(a){return a.timeToScreen(this.start)},links.Timeline.ItemRange.prototype.getRight=function(a){return a.timeToScreen(this.end)},links.Timeline.ItemRange.prototype.getWidth=function(a){return a.timeToScreen(this.end)-a.timeToScreen(this.start)},links.Timeline.ItemFloatingRange=function(a,b){links.Timeline.Item.call(this,a,b)},links.Timeline.ItemFloatingRange.prototype=new links.Timeline.Item,links.Timeline.ItemFloatingRange.prototype.select=function(){var a=this.dom;links.Timeline.addClassName(a,"timeline-event-selected ui-state-active")},links.Timeline.ItemFloatingRange.prototype.unselect=function(){var a=this.dom;links.Timeline.removeClassName(a,"timeline-event-selected ui-state-active")},links.Timeline.ItemFloatingRange.prototype.createDOM=function(){var a=document.createElement("DIV");a.style.position="absolute";var b=document.createElement("DIV");return b.className="timeline-event-content",a.appendChild(b),this.dom=a,this.updateDOM(),a},links.Timeline.ItemFloatingRange.prototype.showDOM=function(a){var b=this.dom;b||(b=this.createDOM()),b.parentNode!=a&&(b.parentNode&&this.hideDOM(),a.appendChild(b),this.rendered=!0)},links.Timeline.ItemFloatingRange.prototype.hideDOM=function(){var a=this.dom;a&&(a.parentNode&&a.parentNode.removeChild(a),this.rendered=!1)},links.Timeline.ItemFloatingRange.prototype.updateDOM=function(){var a=this.dom;a&&(a.firstChild.innerHTML="<a href='test444'>"+this.content+"</a>",a.className="timeline-event timeline-event-range ui-widget ui-state-default",this.isCluster&&links.Timeline.addClassName(a,"timeline-event-cluster ui-widget-header"),this.className&&links.Timeline.addClassName(a,this.className))},links.Timeline.ItemFloatingRange.prototype.updatePosition=function(a){var b=this.dom;if(b){var c=a.size.contentWidth,d=this.getLeft(a),e=this.getRight(a);d<-c&&(d=-c),e>2*c&&(e=2*c),b.style.top=this.top+"px",b.style.left=d+"px",b.style.width=Math.max(e-d,1)+"px"}},links.Timeline.ItemFloatingRange.prototype.isVisible=function(a,b){return!0},links.Timeline.ItemFloatingRange.prototype.setPosition=function(a,b){var c=this.dom;c.style.left=a+"px",c.style.width=b-a+"px",this.group&&(this.top=this.group.top,c.style.top=this.top+"px")},links.Timeline.ItemFloatingRange.prototype.getLeft=function(a){return this.start?a.timeToScreen(this.start):0},links.Timeline.ItemFloatingRange.prototype.getRight=function(a){return this.end?a.timeToScreen(this.end):a.size.contentWidth},links.Timeline.ItemFloatingRange.prototype.getWidth=function(a){return this.getRight(a)-this.getLeft(a)},links.Timeline.ItemDot=function(a,b){links.Timeline.Item.call(this,a,b)},links.Timeline.ItemDot.prototype=new links.Timeline.Item,links.Timeline.ItemDot.prototype.reflow=function(){var a=this.dom,b=a.dot.offsetHeight,c=a.dot.offsetWidth,d=a.content.offsetHeight,e=this.dotHeight!=b||this.dotWidth!=c||this.contentHeight!=d;return this.dotHeight=b,this.dotWidth=c,this.contentHeight=d,e},links.Timeline.ItemDot.prototype.select=function(){var a=this.dom;links.Timeline.addClassName(a,"timeline-event-selected ui-state-active")},links.Timeline.ItemDot.prototype.unselect=function(){var a=this.dom;links.Timeline.removeClassName(a,"timeline-event-selected ui-state-active")},links.Timeline.ItemDot.prototype.createDOM=function(){var a=document.createElement("DIV");a.style.position="absolute";var b=document.createElement("DIV");b.className="timeline-event-content",a.appendChild(b);var c=document.createElement("DIV");return c.style.position="absolute",c.style.width="0px",c.style.height="0px",a.appendChild(c),a.content=b,a.dot=c,this.dom=a,this.updateDOM(),a},links.Timeline.ItemDot.prototype.showDOM=function(a){var b=this.dom;b||(b=this.createDOM()),b.parentNode!=a&&(b.parentNode&&this.hideDOM(),a.appendChild(b),this.rendered=!0)},links.Timeline.ItemDot.prototype.hideDOM=function(){var a=this.dom;a&&(a.parentNode&&a.parentNode.removeChild(a),this.rendered=!1)},links.Timeline.ItemDot.prototype.updateDOM=function(){if(this.dom){var a=this.dom,b=a.dot;a.firstChild.innerHTML="<a href='test555'>"+this.content+"</a>",a.className="timeline-event-dot-container",b.className="timeline-event timeline-event-dot ui-widget ui-state-default",this.isCluster&&(links.Timeline.addClassName(a,"timeline-event-cluster ui-widget-header"),links.Timeline.addClassName(b,"timeline-event-cluster ui-widget-header")),this.className&&(links.Timeline.addClassName(a,this.className),links.Timeline.addClassName(b,this.className))}},links.Timeline.ItemDot.prototype.updatePosition=function(a){var b=this.dom;if(b){var c=a.timeToScreen(this.start);b.style.top=this.top+"px",b.style.left=c-this.dotWidth/2+"px",b.content.style.marginLeft=1.5*this.dotWidth+"px",b.dot.style.top=(this.height-this.dotHeight)/2+"px"}},links.Timeline.ItemDot.prototype.isVisible=function(a,b){return!0},links.Timeline.ItemDot.prototype.setPosition=function(a,b){var c=this.dom;c.style.left=a-this.dotWidth/2+"px",this.group&&(this.top=this.group.top,c.style.top=this.top+"px")},links.Timeline.ItemDot.prototype.getLeft=function(a){return a.timeToScreen(this.start)},links.Timeline.ItemDot.prototype.getRight=function(a){return a.timeToScreen(this.start)+this.width},links.Timeline.prototype.getItem=function(a){if(a>=this.items.length)throw"Cannot get item, index out of range";var b,c=this.data;if(google&&google.visualization&&c instanceof google.visualization.DataTable){var d=links.Timeline.mapColumnIds(c);b={};for(var e in d)d.hasOwnProperty(e)&&(b[e]=this.data.getValue(a,d[e]))}else{if(!links.Timeline.isArray(this.data))throw"Unknown data type. DataTable or Array expected.";b=links.Timeline.clone(this.data[a])}var f=this.items[a];return b.start=new Date(f.start.valueOf()),f.end&&(b.end=new Date(f.end.valueOf())),b.content=f.content,f.group&&(b.group=this.getGroupName(f.group)),f.className&&(b.className=f.className),void 0!==f.editable&&(b.editable=f.editable),f.type&&(b.type=f.type),b},links.Timeline.prototype.getCluster=function(a){if(a>=this.clusters.length)throw"Cannot get cluster, index out of range";var b={},c=this.clusters[a],d=c.items;b.start=new Date(c.start.valueOf()),c.type&&(b.type=c.type),b.items=[];for(var e=0;e<d.length;e++)for(var f=0;f<this.items.length;f++)if(this.items[f]==d[e]){b.items.push(this.getItem(f));break}return b},links.Timeline.prototype.addItem=function(a,b){var c=[a];this.addItems(c,b)},links.Timeline.prototype.addItems=function(a,b){var c=this,d=this.items;a.forEach(function(a){var b=d.length;d.push(c.createItem(a)),c.updateData(b,a)}),this.options.cluster&&this.clusterGenerator.updateData(),b||this.render({animate:!1})},links.Timeline.prototype.createItem=function(a){var b=a.type||(a.end?"range":this.options.style),c=links.Timeline.clone(a);c.type=b,c.group=this.getGroup(a.group);var d,e=this.options;return d=e.axisOnTop?this.size.axis.height+e.eventMarginAxis+e.eventMargin/2:this.size.contentHeight-e.eventMarginAxis-e.eventMargin/2,b in this.itemTypes?new this.itemTypes[b](c,{top:d}):new links.Timeline.Item(c,{top:d})},links.Timeline.prototype.changeItem=function(a,b,c){var d=this.items[a];if(!d)throw"Cannot change item, index out of range";var e=this.createItem({start:b.hasOwnProperty("start")?b.start:d.start,end:b.hasOwnProperty("end")?b.end:d.end,content:b.hasOwnProperty("content")?b.content:d.content,group:b.hasOwnProperty("group")?b.group:this.getGroupName(d.group),className:b.hasOwnProperty("className")?b.className:d.className,editable:b.hasOwnProperty("editable")?b.editable:d.editable,type:b.hasOwnProperty("type")?b.type:d.type});this.items[a]=e,this.renderQueue.hide.push(d),this.renderQueue.show.push(e),this.updateData(a,b),this.options.cluster&&this.clusterGenerator.updateData(),c||(this.render({animate:!1}),this.selection&&this.selection.index==a&&e.select())},links.Timeline.prototype.deleteGroups=function(){this.groups=[],this.groupIndexes={}},links.Timeline.prototype.getGroup=function(a){var b=this.groups,c=this.groupIndexes,d=void 0,e=c[a];if(void 0==e&&void 0!=a){d={content:a,labelTop:0,lineTop:0},b.push(d),1==this.options.groupsOrder?b=b.sort(function(a,b){return a.content>b.content?1:a.content<b.content?-1:0}):"function"==typeof this.options.groupsOrder&&(b=b.sort(this.options.groupsOrder));for(var f=0,g=b.length;f<g;f++)c[b[f].content]=f}else d=b[e];return d},links.Timeline.prototype.getGroupName=function(a){return a?a.content:void 0},links.Timeline.prototype.cancelChange=function(){this.applyChange=!1},links.Timeline.prototype.cancelDelete=function(){this.applyDelete=!1},links.Timeline.prototype.cancelAdd=function(){this.applyAdd=!1},links.Timeline.prototype.setSelection=function(a){if(void 0!=a&&a.length>0){if(void 0!=a[0].row){var b=a[0].row;if(this.items[b]){var c=this.items[b];this.selectItem(b);var d,e=c.start,f=c.end;d=void 0!=f?(f.valueOf()+e.valueOf())/2:e.valueOf();var g=this.end.valueOf()-this.start.valueOf(),h=new Date(d-g/2),i=new Date(d+g/2);return this.setVisibleChartRange(h,i),!0}}}else this.unselectItem();return!1},links.Timeline.prototype.getSelection=function(){var a=[];return this.selection&&(void 0!==this.selection.index?a.push({row:this.selection.index}):a.push({cluster:this.selection.cluster})),a},links.Timeline.prototype.selectItem=function(a){if(this.unselectItem(),this.selection=void 0,void 0!=this.items[a]){var b=this.items[a];b.dom;this.selection={index:a},b&&b.dom&&(this.isEditable(b)&&(b.dom.style.cursor="move"),b.select()),this.repaintDeleteButton(),this.repaintDragAreas()}},links.Timeline.prototype.selectCluster=function(a){this.unselectItem(),this.selection=void 0,void 0!=this.clusters[a]&&(this.selection={cluster:a},this.repaintDeleteButton(),this.repaintDragAreas())},links.Timeline.prototype.isSelected=function(a){return this.selection&&this.selection.index==a},links.Timeline.prototype.unselectItem=function(){if(this.selection&&void 0!==this.selection.index){var a=this.items[this.selection.index];if(a&&a.dom){a.dom.style.cursor="",a.unselect()}this.selection=void 0,this.repaintDeleteButton(),this.repaintDragAreas()}},links.Timeline.prototype.stackItems=function(a){void 0==a&&(a=!1);var b=this.stack;if(b||(b={},this.stack=b),b.sortedItems=this.stackOrder(this.renderedItems),b.finalItems=this.stackCalculateFinal(b.sortedItems),a||b.timer){var c=this,d=function(){var a=c.stackMoveOneStep(b.sortedItems,b.finalItems);c.repaint(),a?delete b.timer:b.timer=setTimeout(d,30)};b.timer||(b.timer=setTimeout(d,30))}else this.stackMoveToFinal(b.sortedItems,b.finalItems)},links.Timeline.prototype.stackCancelAnimation=function(){this.stack&&this.stack.timer&&(clearTimeout(this.stack.timer),delete this.stack.timer)},links.Timeline.prototype.getItemsByGroup=function(a){for(var b={},c=0;c<a.length;++c){var d=a[c],e="undefined";d.group&&(e=d.group.content?d.group.content:d.group),b[e]||(b[e]=[]),b[e].push(d)}return b},links.Timeline.prototype.stackOrder=function(a){var b=a.concat([]),c=this.options.customStackOrder&&"function"==typeof this.options.customStackOrder?this.options.customStackOrder:function(a,b){return(a instanceof links.Timeline.ItemRange||a instanceof links.Timeline.ItemFloatingRange)&&!(b instanceof links.Timeline.ItemRange||b instanceof links.Timeline.ItemFloatingRange)?-1:a instanceof links.Timeline.ItemRange||a instanceof links.Timeline.ItemFloatingRange||!(b instanceof links.Timeline.ItemRange||b instanceof links.Timeline.ItemFloatingRange)?a.left-b.left:1};return b.sort(c),b},links.Timeline.prototype.stackCalculateFinal=function(a){var b,c,d=this.size,e=this.options,f=e.axisOnTop,g=e.eventMargin,h=e.eventMarginAxis,i=f?d.axis.height+h+g/2:d.contentHeight-h-g/2,k=[];for(b=this.getItemsByGroup(a),j=0;j<this.groups.length;++j){var l=this.groups[j];b[l.content]?(c=this.finalItemsPosition(b[l.content],i,l),c.forEach(function(a){k.push(a)}),f?i+=l.itemsHeight+g:i-=l.itemsHeight+g):f?i+=e.groupMinHeight+g:i-=e.groupMinHeight+g}return b.undefined&&(c=this.finalItemsPosition(b.undefined,i),c.forEach(function(a){k.push(a)})),k},links.Timeline.prototype.finalItemsPosition=function(a,b,c){var d,e,f,g=this.options,h=g.axisOnTop,i=g.eventMargin;for(f=this.initialItemsPosition(a,b),d=0,e=f.length;d<e;d++){var j=f[d],k=null;if(this.options.stackEvents)do{null!=(k=this.stackItemsCheckOverlap(f,d,0,d-1))&&(j.top=h?k.top+k.height+i:k.top-j.height-i,j.bottom=j.top+j.height)}while(k);c&&(c.itemsHeight=h?c.itemsHeight?Math.max(c.itemsHeight,j.bottom-b):j.height+i:c.itemsHeight?Math.max(c.itemsHeight,b-j.top):j.height+i)}return f},links.Timeline.prototype.initialItemsPosition=function(a,b){for(var c=this.options,d=c.axisOnTop,e=[],f=0,g=a.length;f<g;++f){var h,i,j=a[f],k=j.height,l=j.getWidth(this),m=j.getRight(this),n=m-l;h=d?b:b-k,i=h+k,e.push({left:n,top:h,right:m,bottom:i,height:k,item:j})}return e},links.Timeline.prototype.stackMoveOneStep=function(a,b){for(var c=!0,d=0,e=b.length;d<e;d++){var f=b[d],g=f.item,h=parseInt(g.top),i=parseInt(f.top),j=i-h;if(j){var k=i==h?0:i>h?1:-1;Math.abs(j)>4&&(k=j/4);var l=parseInt(h+k);l!=i&&(c=!1),g.top=l,g.bottom=g.top+g.height}else g.top=f.top,g.bottom=f.bottom;g.left=f.left,g.right=f.right}return c},links.Timeline.prototype.stackMoveToFinal=function(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c],f=e.item;f.left=e.left,f.top=e.top,f.right=e.right,f.bottom=e.bottom}},links.Timeline.prototype.stackItemsCheckOverlap=function(a,b,c,d){for(var e=this.options.eventMargin,f=this.collision,g=a[b],h=d;h>=c;h--){var i=a[h];if(f(g,i,e)&&h!=b)return i}},links.Timeline.prototype.collision=function(a,b,c){return void 0==c&&(c=0),a.left-c<b.right&&a.right+c>b.left&&a.top-c<b.bottom&&a.bottom+c>b.top},links.Timeline.prototype.trigger=function(a){var b=null;switch(a){case"rangechange":case"rangechanged":b={start:new Date(this.start.valueOf()),end:new Date(this.end.valueOf())};break;case"timechange":case"timechanged":b={time:new Date(this.customTime.valueOf())}}links.events.trigger(this,a,b),google&&google.visualization&&google.visualization.events.trigger(this,a,b)},links.Timeline.prototype.clusterItems=function(){if(this.options.cluster){var a=this.clusterGenerator.getClusters(this.conversion.factor,this.options.clusterMaxItems);if(this.clusters!=a){this.renderQueue;this.clusters&&this.clusters.forEach(function(a){a.items.forEach(function(a){a.cluster=void 0})}),a.forEach(function(a){a.items.forEach(function(b){b.cluster=a})}),this.clusters=a}}},links.Timeline.prototype.filterItems=function(){function a(a){a.forEach(function(a){var c=a.rendered;c!=a.isVisible(d,e)&&(c&&b.hide.push(a),-1==b.show.indexOf(a)&&b.show.push(a))})}var b=this.renderQueue,c=this.end-this.start,d=new Date(this.start.valueOf()-c),e=new Date(this.end.valueOf()+c);a(this.items),this.clusters&&a(this.clusters)},links.Timeline.ClusterGenerator=function(a){this.timeline=a,this.clear()},links.Timeline.ClusterGenerator.prototype.clear=function(){this.items=[],this.groups={},this.clearCache()},links.Timeline.ClusterGenerator.prototype.clearCache=function(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]},links.Timeline.ClusterGenerator.prototype.setData=function(a,b){this.items=a||[],this.dataChanged=!0,this.applyOnChangedLevel=!0,b&&b.applyOnChangedLevel&&(this.applyOnChangedLevel=b.applyOnChangedLevel)},links.Timeline.ClusterGenerator.prototype.updateData=function(){this.dataChanged=!0,this.applyOnChangedLevel=!1},links.Timeline.ClusterGenerator.prototype.filterData=function(){var a=this.items||[],b={};this.groups=b,a.forEach(function(a){var c=a.group?a.group.content:"",d=b[c];d||(d=[],b[c]=d),d.push(a),a.start&&(a.end?a.center=(a.start.valueOf()+a.end.valueOf())/2:a.center=a.start.valueOf())});for(var c in b)b.hasOwnProperty(c)&&b[c].sort(function(a,b){return a.center-b.center});this.dataChanged=!1},links.Timeline.ClusterGenerator.prototype.getClusters=function(a,b){var c=-1,d=2,e=0;if(a>0&&(c=Math.round(Math.log(100/a)/Math.log(d)),e=Math.pow(d,c)),this.dataChanged){var f=c!=this.cacheLevel;(!this.applyOnChangedLevel||f)&&(this.clearCache(),this.filterData())}this.cacheLevel=c;var g=this.cache[c];if(!g){g=[];for(var h in this.groups)if(this.groups.hasOwnProperty(h))for(var i=this.groups[h],j=i.length,k=0;k<j;){for(var l=i[k],m=1,n=k-1;n>=0&&l.center-i[n].center<e/2;)i[n].cluster||m++,n--;for(var o=k+1;o<i.length&&i[o].center-l.center<e/2;)m++,o++;for(var p=g.length-1;p>=0&&l.center-g[p].center<e/2;)l.group==g[p].group&&m++,p--;if(m>b){for(var q=m-b+1,r=[],s=void 0,t=void 0,u=void 0,v=!1,w=0,x=k;r.length<q&&x<i.length;){var y=i[x],z=y.start.valueOf(),A=y.end?y.end.valueOf():y.start.valueOf();r.push(y),s=w?w/(w+1)*s+1/(w+1)*y.center:y.center,t=void 0!=t?Math.min(t,z):z,u=void 0!=u?Math.max(u,A):A,v=v||y instanceof links.Timeline.ItemRange||y instanceof links.Timeline.ItemFloatingRange,w++,x++}var B,C="Cluster containing "+w+" events. Zoom in to see the individual events.",D='<div title="'+C+'">'+w+" events</div>",E=l.group?l.group.content:void 0;B=v?this.timeline.createItem({start:new Date(t),end:new Date(u),content:D,group:E}):this.timeline.createItem({start:new Date(s),content:D,group:E}),B.isCluster=!0,B.items=r,B.items.forEach(function(a){a.cluster=B}),g.push(B),k+=q}else delete l.cluster,k+=1}this.cache[c]=g}return g},links.events=links.events||{listeners:[],indexOf:function(a){for(var b=this.listeners,c=0,d=this.listeners.length;c<d;c++){var e=b[c];if(e&&e.object==a)return c}return-1},addListener:function(a,b,c){var d=this.indexOf(a),e=this.listeners[d];e||(e={object:a,events:{}},this.listeners.push(e));var f=e.events[b];f||(f=[],e.events[b]=f),-1==f.indexOf(c)&&f.push(c)},removeListener:function(a,b,c){var d=this.indexOf(a),e=this.listeners[d];if(e){var f=e.events[b];if(f){var d=f.indexOf(c);-1!=d&&f.splice(d,1),0==f.length&&delete e.events[b]}var g=0,h=e.events;for(var i in h)h.hasOwnProperty(i)&&g++;0==g&&delete this.listeners[d]}},removeAllListeners:function(){this.listeners=[]},trigger:function(a,b,c){var d=this.indexOf(a),e=this.listeners[d];if(e){var f=e.events[b];if(f)for(var g=0,h=f.length;g<h;g++)f[g](c)}}},links.Timeline.StepDate=function(a,b,c){this.current=new Date,this._start=new Date,this._end=new Date,this.autoScale=!0,this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=1,this.setRange(a,b,c)},links.Timeline.StepDate.SCALE={MILLISECOND:1,SECOND:2,MINUTE:3,HOUR:4,DAY:5,WEEKDAY:6,MONTH:7,YEAR:8},links.Timeline.StepDate.prototype.setRange=function(a,b,c){a instanceof Date&&b instanceof Date&&(this._start=void 0!=a?new Date(a.valueOf()):new Date,this._end=void 0!=b?new Date(b.valueOf()):new Date,this.autoScale&&this.setMinimumStep(c))},links.Timeline.StepDate.prototype.start=function(){this.current=new Date(this._start.valueOf()),this.roundToMinor()},links.Timeline.StepDate.prototype.roundToMinor=function(){switch(this.scale){case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step)),this.current.setMonth(0);case links.Timeline.StepDate.SCALE.MONTH:this.current.setDate(1);case links.Timeline.StepDate.SCALE.DAY:case links.Timeline.StepDate.SCALE.WEEKDAY:this.current.setHours(0);case links.Timeline.StepDate.SCALE.HOUR:this.current.setMinutes(0);case links.Timeline.StepDate.SCALE.MINUTE:this.current.setSeconds(0);case links.Timeline.StepDate.SCALE.SECOND:this.current.setMilliseconds(0)}if(1!=this.step)switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()-1-(this.current.getDate()-1)%this.step+1);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step)}},links.Timeline.StepDate.prototype.end=function(){return this.current.valueOf()>this._end.valueOf()},links.Timeline.StepDate.prototype.next=function(){var a=this.current.valueOf();if(this.current.getMonth()<6)switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current=new Date(this.current.valueOf()+1e3*this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current=new Date(this.current.valueOf()+1e3*this.step*60);break;case links.Timeline.StepDate.SCALE.HOUR:this.current=new Date(this.current.valueOf()+1e3*this.step*60*60);var b=this.current.getHours();this.current.setHours(b-b%this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}else switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()+this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()+this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.setHours(this.current.getHours()+this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}if(1!=this.step)switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current.getMilliseconds()<this.step&&this.current.setMilliseconds(0);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.getSeconds()<this.step&&this.current.setSeconds(0);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.getMinutes()<this.step&&this.current.setMinutes(0);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.getHours()<this.step&&this.current.setHours(0);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.getDate()<this.step+1&&this.current.setDate(1);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.getMonth()<this.step&&this.current.setMonth(0);break;case links.Timeline.StepDate.SCALE.YEAR:}this.current.valueOf()==a&&(this.current=new Date(this._end.valueOf()))},links.Timeline.StepDate.prototype.getCurrent=function(){return this.current},links.Timeline.StepDate.prototype.setScale=function(a,b){this.scale=a,b>0&&(this.step=b),this.autoScale=!1},links.Timeline.StepDate.prototype.setAutoScale=function(a){this.autoScale=a},links.Timeline.StepDate.prototype.setMinimumStep=function(a){if(void 0!=a){var b=31104e6,c=2592e6,d=864e5,e=36e5,f=6e4,g=1e3,h=1;1e3*b>a&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=1e3),500*b>a&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=500),100*b>a&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=100),50*b>a&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=50),10*b>a&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=10),5*b>a&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=5),b>a&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=1),3*c>a&&(this.scale=links.Timeline.StepDate.SCALE.MONTH,this.step=3),c>a&&(this.scale=links.Timeline.StepDate.SCALE.MONTH,this.step=1),5*d>a&&(this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=5),2*d>a&&(this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=2),d>a&&(this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=1),d/2>a&&(this.scale=links.Timeline.StepDate.SCALE.WEEKDAY,this.step=1),4*e>a&&(this.scale=links.Timeline.StepDate.SCALE.HOUR,this.step=4),e>a&&(this.scale=links.Timeline.StepDate.SCALE.HOUR,this.step=1),15*f>a&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=15),10*f>a&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=10),5*f>a&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=5),f>a&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=1),15*g>a&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=15),10*g>a&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=10),5*g>a&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=5),g>a&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=1),200*h>a&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=200),100*h>a&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=100),50*h>a&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=50),10*h>a&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=10),5*h>a&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=5),h>a&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=1)}},links.Timeline.StepDate.prototype.snap=function(a){if(this.scale==links.Timeline.StepDate.SCALE.YEAR){var b=a.getFullYear()+Math.round(a.getMonth()/12);a.setFullYear(Math.round(b/this.step)*this.step),a.setMonth(0),a.setDate(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.MONTH)a.getDate()>15?(a.setDate(1),a.setMonth(a.getMonth()+1)):a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);else if(this.scale==links.Timeline.StepDate.SCALE.DAY||this.scale==links.Timeline.StepDate.SCALE.WEEKDAY){switch(this.step){case 5:case 2:a.setHours(24*Math.round(a.getHours()/24));break;default:a.setHours(12*Math.round(a.getHours()/12))}a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.HOUR){switch(this.step){case 4:a.setMinutes(60*Math.round(a.getMinutes()/60));break;default:a.setMinutes(30*Math.round(a.getMinutes()/30))}a.setSeconds(0),a.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.MINUTE){switch(this.step){case 15:case 10:a.setMinutes(5*Math.round(a.getMinutes()/5)),a.setSeconds(0);break;case 5:a.setSeconds(60*Math.round(a.getSeconds()/60));break;default:a.setSeconds(30*Math.round(a.getSeconds()/30))}a.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.SECOND)switch(this.step){case 15:case 10:a.setSeconds(5*Math.round(a.getSeconds()/5)),a.setMilliseconds(0);break;case 5:a.setMilliseconds(1e3*Math.round(a.getMilliseconds()/1e3));break;default:a.setMilliseconds(500*Math.round(a.getMilliseconds()/500))}else if(this.scale==links.Timeline.StepDate.SCALE.MILLISECOND){var c=this.step>5?this.step/2:1;a.setMilliseconds(Math.round(a.getMilliseconds()/c)*c)}},links.Timeline.StepDate.prototype.isMajor=function(){switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return 0==this.current.getMilliseconds();case links.Timeline.StepDate.SCALE.SECOND:return 0==this.current.getSeconds();case links.Timeline.StepDate.SCALE.MINUTE:return 0==this.current.getHours()&&0==this.current.getMinutes();case links.Timeline.StepDate.SCALE.HOUR:return 0==this.current.getHours();case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:return 1==this.current.getDate();case links.Timeline.StepDate.SCALE.MONTH:return 0==this.current.getMonth();case links.Timeline.StepDate.SCALE.YEAR:default:return!1}},links.Timeline.StepDate.prototype.getLabelMinor=function(a,b){switch(void 0==b&&(b=this.current),this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return String(b.getMilliseconds());case links.Timeline.StepDate.SCALE.SECOND:return String(b.getSeconds());case links.Timeline.StepDate.SCALE.MINUTE:case links.Timeline.StepDate.SCALE.HOUR:return this.addZeros(b.getHours(),2)+":"+this.addZeros(b.getMinutes(),2);case links.Timeline.StepDate.SCALE.WEEKDAY:return a.DAYS_SHORT[b.getDay()]+" "+b.getDate();case links.Timeline.StepDate.SCALE.DAY:return String(b.getDate());case links.Timeline.StepDate.SCALE.MONTH:return a.MONTHS_SHORT[b.getMonth()];case links.Timeline.StepDate.SCALE.YEAR:return String(b.getFullYear());default:return""}};links.Timeline.StepDate.prototype.getLabelMajor=function(a,b){switch(void 0==b&&(b=this.current),this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return this.addZeros(b.getHours(),2)+":"+this.addZeros(b.getMinutes(),2)+":"+this.addZeros(b.getSeconds(),2);case links.Timeline.StepDate.SCALE.SECOND:return b.getDate()+" "+a.MONTHS[b.getMonth()]+" "+this.addZeros(b.getHours(),2)+":"+this.addZeros(b.getMinutes(),2);case links.Timeline.StepDate.SCALE.MINUTE:case links.Timeline.StepDate.SCALE.HOUR:return a.DAYS[b.getDay()]+" "+b.getDate()+" "+a.MONTHS[b.getMonth()]+" "+b.getFullYear();case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:return a.MONTHS[b.getMonth()]+" "+b.getFullYear();case links.Timeline.StepDate.SCALE.MONTH:return String(b.getFullYear());default:return""}},links.Timeline.StepDate.prototype.addZeros=function(a,b){for(var c=""+a;c.length<b;)c="0"+c;return c},links.imageloader=function(){function a(a){if(1==f[a])return!0;var b=new Image;return b.src=a,!!b.complete}function b(a){return void 0!=g[a]}function c(c,d,e){if(void 0==e&&(e=!0),a(c))return void(e&&d(c));if(!b(c)||e){var h=g[c];if(!h){var i=new Image;i.src=c,h=[],g[c]=h,i.onload=function(a){f[c]=!0,delete g[c];for(var b=0;b<h.length;b++)h[b](c)}}-1==h.indexOf(d)&&h.push(d)}}function d(b,d,e){var f=[];if(b.forEach(function(b){a(b)||f.push(b)}),f.length){var g=f.length;f.forEach(function(a){c(a,function(){0==--g&&d()},e)})}else e&&d()}function e(a,b){for(var c=a.firstChild;c;){if("IMG"==c.tagName){var d=c.src;-1==b.indexOf(d)&&b.push(d)}e(c,b),c=c.nextSibling}}var f={},g={};return{isLoaded:a,isLoading:b,load:c,loadAll:d,filterImageUrls:e}}(),links.Timeline.addEventListener=function(a,b,c,d){a.addEventListener?(void 0===d&&(d=!1),"mousewheel"===b&&navigator.userAgent.indexOf("Firefox")>=0&&(b="DOMMouseScroll"),a.addEventListener(b,c,d)):a.attachEvent("on"+b,c)},links.Timeline.removeEventListener=function(a,b,c,d){a.removeEventListener?(void 0===d&&(d=!1),"mousewheel"===b&&navigator.userAgent.indexOf("Firefox")>=0&&(b="DOMMouseScroll"),a.removeEventListener(b,c,d)):a.detachEvent("on"+b,c)},links.Timeline.getTarget=function(a){a||(a=window.event);var b;return a.target?b=a.target:a.srcElement&&(b=a.srcElement),void 0!=b.nodeType&&3==b.nodeType&&(b=b.parentNode),b},links.Timeline.stopPropagation=function(a){a||(a=window.event),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},links.Timeline.preventDefault=function(a){a||(a=window.event),a.preventDefault?a.preventDefault():a.returnValue=!1},links.Timeline.getAbsoluteLeft=function(a){for(var b=document.documentElement,c=document.body,d=a.offsetLeft,e=a.offsetParent;null!=e&&e!=c&&e!=b;)d+=e.offsetLeft,d-=e.scrollLeft,e=e.offsetParent;return d},links.Timeline.getAbsoluteTop=function(a){for(var b=document.documentElement,c=document.body,d=a.offsetTop,e=a.offsetParent;null!=e&&e!=c&&e!=b;)d+=e.offsetTop,d-=e.scrollTop,e=e.offsetParent;return d},links.Timeline.getPageY=function(a){if("targetTouches"in a&&a.targetTouches.length&&(a=a.targetTouches[0]),"pageY"in a)return a.pageY;var b=a.clientY,c=document.documentElement,d=document.body;return b+(c&&c.scrollTop||d&&d.scrollTop||0)-(c&&c.clientTop||d&&d.clientTop||0)},links.Timeline.getPageX=function(a){if("targetTouches"in a&&a.targetTouches.length&&(a=a.targetTouches[0]),"pageX"in a)return a.pageX;var b=a.clientX,c=document.documentElement,d=document.body;return b+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c&&c.clientLeft||d&&d.clientLeft||0)},links.Timeline.addClassName=function(a,b){for(var c=a.className.split(" "),d=b.split(" "),e=!1,f=0;f<d.length;f++)-1==c.indexOf(d[f])&&(c.push(d[f]),e=!0);e&&(a.className=c.join(" "))},links.Timeline.removeClassName=function(a,b){for(var c=a.className.split(" "),d=b.split(" "),e=!1,f=0;f<d.length;f++){var g=c.indexOf(d[f]);-1!=g&&(c.splice(g,1),e=!0)}e&&(a.className=c.join(" "))},links.Timeline.isArray=function(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)},links.Timeline.clone=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},links.Timeline.parseJSONDate=function(a){if(void 0!=a){if(a instanceof Date)return a;var b=a.match(/\/Date\((-?\d+)([-\+]?\d{2})?(\d{2})?\)\//i);if(b){var c=b[2]?36e5*b[2]+6e4*b[3]*(b[2]/Math.abs(b[2])):0;return new Date(1*b[1]+c)}return Date.parse(a)}};